<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MODIStsp main function — MODIStsp • MODIStsp</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>



<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- ropensci -->
<link href="../ropensci.css" rel="stylesheet">

<meta property="og:title" content="MODIStsp main function — MODIStsp" />
<meta property="og:description" content="Main function for the MODIS Time Series Processing Tool
(MODIStsp)" />
<meta property="og:image" content="http://docs.ropensci.org/MODIStsp/logo.png" />
<meta name="twitter:card" content="summary" />






<!-- Matomo -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script src="https://ropensci.org/scripts/matomo.js"></script>
<noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt="" /></p></noscript>

<!-- End Matomo Code -->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci" /></a>
        <a class="navbar-brand" href="../index.html"><i>MODIStsp <small>v2.0.5</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/interactive_execution.html">Interactive Execution - the MODIStsp GUI</a>
    </li>
    <li>
      <a href="../articles/noninteractive_execution.html">Non-Interactive Execution from within R</a>
    </li>
    <li>
      <a href="../articles/standalone_execution.html">Standalone Execution and Scheduled Processing</a>
    </li>
    <li>
      <a href="../articles/output.html">Outputs Format and Naming Conventions</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Accessing and Analyzing Processed Data from R</a>
    </li>
    <li>
      <a href="../articles/Products_list.html">Supported MODIS Products</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/ropensci/MODIStsp/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
<li>
  <a href="../articles/lorenzo.html">
    <span class="fa fa-cross"></span>
     
    dedication
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MODIStsp main function</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/MODIStsp/blob/master/R/MODIStsp.R'><code>R/MODIStsp.R</code></a></small>
    <div class="hidden name"><code>MODIStsp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Main function for the MODIS Time Series Processing Tool
(MODIStsp)</p>
    </div>

    <pre class="usage"><span class='fu'>MODIStsp</span><span class='op'>(</span>
  <span class='va'>...</span>,
  gui <span class='op'>=</span> <span class='cn'>TRUE</span>,
  out_folder <span class='op'>=</span> <span class='cn'>NULL</span>,
  out_folder_mod <span class='op'>=</span> <span class='cn'>NULL</span>,
  opts_file <span class='op'>=</span> <span class='cn'>NULL</span>,
  selprod <span class='op'>=</span> <span class='cn'>NULL</span>,
  bandsel <span class='op'>=</span> <span class='cn'>NULL</span>,
  quality_bandsel <span class='op'>=</span> <span class='cn'>NULL</span>,
  indexes_bandsel <span class='op'>=</span> <span class='cn'>NULL</span>,
  sensor <span class='op'>=</span> <span class='cn'>NULL</span>,
  download_server <span class='op'>=</span> <span class='cn'>NULL</span>,
  downloader <span class='op'>=</span> <span class='cn'>NULL</span>,
  user <span class='op'>=</span> <span class='cn'>NULL</span>,
  password <span class='op'>=</span> <span class='cn'>NULL</span>,
  download_range <span class='op'>=</span> <span class='cn'>NULL</span>,
  start_date <span class='op'>=</span> <span class='cn'>NULL</span>,
  end_date <span class='op'>=</span> <span class='cn'>NULL</span>,
  spatmeth <span class='op'>=</span> <span class='cn'>NULL</span>,
  start_x <span class='op'>=</span> <span class='cn'>NULL</span>,
  end_x <span class='op'>=</span> <span class='cn'>NULL</span>,
  start_y <span class='op'>=</span> <span class='cn'>NULL</span>,
  end_y <span class='op'>=</span> <span class='cn'>NULL</span>,
  bbox <span class='op'>=</span> <span class='cn'>NULL</span>,
  spafile <span class='op'>=</span> <span class='cn'>NULL</span>,
  out_projsel <span class='op'>=</span> <span class='cn'>NULL</span>,
  output_proj <span class='op'>=</span> <span class='cn'>NULL</span>,
  out_res_sel <span class='op'>=</span> <span class='cn'>NULL</span>,
  out_res <span class='op'>=</span> <span class='cn'>NULL</span>,
  resampling <span class='op'>=</span> <span class='cn'>NULL</span>,
  reprocess <span class='op'>=</span> <span class='cn'>NULL</span>,
  delete_hdf <span class='op'>=</span> <span class='cn'>NULL</span>,
  nodata_change <span class='op'>=</span> <span class='cn'>NULL</span>,
  scale_val <span class='op'>=</span> <span class='cn'>NULL</span>,
  ts_format <span class='op'>=</span> <span class='cn'>NULL</span>,
  out_format <span class='op'>=</span> <span class='cn'>NULL</span>,
  compress <span class='op'>=</span> <span class='cn'>NULL</span>,
  test <span class='op'>=</span> <span class='cn'>NULL</span>,
  n_retries <span class='op'>=</span> <span class='fl'>5</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>not used for values, forces later arguments to bind by name</p></td>
    </tr>
    <tr>
      <th>gui</th>
      <td><p><code>logical</code> if TRUE: the GUI is opened before processing. If FALSE:
processing parameters are retrieved from the provided <code>opts_file</code>
argument), Default: TRUE</p></td>
    </tr>
    <tr>
      <th>out_folder</th>
      <td><p><code>character</code> Main output folder, default: NULL.</p></td>
    </tr>
    <tr>
      <th>out_folder_mod</th>
      <td><p><code>character</code> Output folder for original HDF storage, default: $tempdir</p></td>
    </tr>
    <tr>
      <th>opts_file</th>
      <td><p><code>character</code> full path to a JSON file
containing MODIStsp processing options saved from the GUI, Default: NULL</p></td>
    </tr>
    <tr>
      <th>selprod</th>
      <td><p><code>character</code> Name of selected MODIS product (e.g.,
Vegetation Indexes_16Days_250m (M*D13Q1)). You can get
a list of available product names using function <code>MODIStsp_get_prodnames</code>,
Default: NULL</p></td>
    </tr>
    <tr>
      <th>bandsel</th>
      <td><p><code>character array</code> Original MODIS layers to be processed.
You can get a list of available layers for a given product
using function <code>MODIStsp_get_prodlayers</code> (e.g., MODIStsp_get_prodlayers("M*D13Q1")$bandnames),
Default: NULL</p></td>
    </tr>
    <tr>
      <th>quality_bandsel</th>
      <td><p><code>character array</code> Quality Indicators to be computed starting from
bit fields of original MODIS layers. You can get a list of available quality layers for a given product
using function <code>MODIStsp_get_prodlayers</code> (e.g., MODIStsp_get_prodlayers("M*D13Q1")$quality_bandnames),
Default: NULL</p></td>
    </tr>
    <tr>
      <th>indexes_bandsel</th>
      <td><p><code>character array</code>Spectral Indexes to be computed starting from reflectance bands.
You can get a list of available quality layers for a given product
using function <code>MODIStsp_get_prodlayers</code> (e.g., MODIStsp_get_prodlayers("M*D13Q1")$indexes_bandnames),
Default: NULL</p></td>
    </tr>
    <tr>
      <th>sensor</th>
      <td><p><code>character ["Terra"| "Aqua" | "Both"]</code> MODIS platform to be considered.
(Ignored for MCD* products). Default: "Both"</p></td>
    </tr>
    <tr>
      <th>download_server</th>
      <td><p><code>character ["http" | "offline"]</code> service to be used for
download. Default: "http"</p></td>
    </tr>
    <tr>
      <th>downloader</th>
      <td><p>download_server <code>character ["http" | "aria2"]</code> downloader to be used,
Default: "http"</p></td>
    </tr>
    <tr>
      <th>user</th>
      <td><p><code>character</code> Username for NASA http server.
(<a href='https://urs.earthdata.nasa.gov/home'>urs.earthdata.nasa.gov/home</a>).</p></td>
    </tr>
    <tr>
      <th>password</th>
      <td><p><code>character</code> Password for NASA http server
(<a href='https://urs.earthdata.nasa.gov/home'>urs.earthdata.nasa.gov/home</a>).</p></td>
    </tr>
    <tr>
      <th>download_range</th>
      <td><p><code>character ["Full" | "Seasonal"]</code> If "full", all the
available images between the starting and the ending dates are downloaded;
If "seasonal", only the images included in the season are downloaded
(e.g: if the starting date is 2005-12-01 and the ending is 2010-02-31, only
the images of December, January and February from 2005 to 2010 - excluding
2005-01, 2005-02 and 2010-12 - are downloaded), Default: Full</p></td>
    </tr>
    <tr>
      <th>start_date</th>
      <td><p><code>character</code> Start date for images download and preprocessing
(yyyy.mm.dd), Default: NULL</p></td>
    </tr>
    <tr>
      <th>end_date</th>
      <td><p><code>character</code> End date for images download and preprocessing
(yyyy.mm.dd), Default: NULL</p></td>
    </tr>
    <tr>
      <th>spatmeth</th>
      <td><p><code>character ["tiles" | "bbox" | "file"]</code>, indicates how the processing
extent is retrieves. if "tiles", use the specified tiles (start_x....).
If "file", retrieve extent from spatial file specifies in <code>spafile</code>. If
"bbox", use the specified bounding box, Default: "tiles"</p></td>
    </tr>
    <tr>
      <th>start_x</th>
      <td><p><code>integer [0-35]</code> Start MODIS horizontal tile defining spatial extent.
Ignored if spatmeth != "tiles", Default: 18</p></td>
    </tr>
    <tr>
      <th>end_x</th>
      <td><p><code>integer [0-35]</code> End MODIS horizontal tile defining spatial extent.
Ignored if spatmeth != "tiles", Default: 18</p></td>
    </tr>
    <tr>
      <th>start_y</th>
      <td><p><code>integer [0-17]</code> Start MODIS vertical tile defining spatial extent.
Ignored if spatmeth != "tiles", Default: 4</p></td>
    </tr>
    <tr>
      <th>end_y</th>
      <td><p><code>integer [0-17]</code> End MODIS vertical tile defining spatial extent.
Ignored if spatmeth != "tiles", Default: 4</p></td>
    </tr>
    <tr>
      <th>bbox</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(4)</a></code> Output bounding box (xmin, ymin, xmax, ymax) in
out_proj coordinate system. Ignored if spatmeth == "tiles", Default: NULL</p></td>
    </tr>
    <tr>
      <th>spafile</th>
      <td><p><code>character</code> (optional) full path of a spatial file
to use to derive the processing extent. If not NULL, the processing options
which define the extent, the selected tiles and the "Full Tile / Custom"
in the JSON options file are overwritten and new files are created on the
extent of the provided spatial file. Ignored if spatmet != "file", Default: NULL</p></td>
    </tr>
    <tr>
      <th>out_projsel</th>
      <td><p><code>character ["Native", "User Defined</code>] If "Native", the
outputs keep the original resolution of MODIS HDF images. Otherwise, the value
set in "out_res" is used, Default:Native</p></td>
    </tr>
    <tr>
      <th>output_proj</th>
      <td><p><code>character</code> either equal to "MODIS Sinusoidal",
or to the code of a valid EPSG or to a WKT projection string.
Ignored if outproj_sel == "Native", Default: NULL</p></td>
    </tr>
    <tr>
      <th>out_res_sel</th>
      <td><p><code>character ["Native", "User Defined</code>]. If "Native", the
outputs keep the original resolution of MODIS HDF images. Otherwise, the value
set in "out_res" is used.</p></td>
    </tr>
    <tr>
      <th>out_res</th>
      <td><p><code>float</code> Output resolution (in output projection measurement
unit). Ignored if out_res_sel == "Native".</p></td>
    </tr>
    <tr>
      <th>resampling</th>
      <td><p><code>character ["near" | "bilinear" | "cubic" | "cubicspline", |lanczos"|, "average"|, "mode", |"max"|, |"min"|, |"q1"|, |"q3"|, |"sum"|]</code>
Resampling method to be used by <code>gdalwarp</code>.</p></td>
    </tr>
    <tr>
      <th>reprocess</th>
      <td><p><code>logical</code> If TRUE, reprocess data for already existing dates.</p></td>
    </tr>
    <tr>
      <th>delete_hdf</th>
      <td><p><code>logical</code> If TRUE, delete downloaded HDF files after completion.</p></td>
    </tr>
    <tr>
      <th>nodata_change</th>
      <td><p><code>logical</code> if TRUE, NoData values are set to the max value
of the datatype of the layer on the MODIStsp output rasters. NOTE: If multiple
nodata values are reported for a layer, all are reset to the new value.</p></td>
    </tr>
    <tr>
      <th>scale_val</th>
      <td><p><code>logical</code> If TRUE,  scale and offset are applied to
original MODIS layers, and Spectral Indexes are saved as floating point. If
FALSE, no rescaling is done and Spectral Indexes are saved as integer, with a
10000 scaling factor.</p></td>
    </tr>
    <tr>
      <th>ts_format</th>
      <td><p><code>character array including ["R asterStack" | "ENVI Meta Files" | "GDAL vrt files" | "ENVI and GDAL"]</code> Selected virtual time series format.</p></td>
    </tr>
    <tr>
      <th>out_format</th>
      <td><p><code>character ["ENVI" | "GTiff"]</code> Desired output format.</p></td>
    </tr>
    <tr>
      <th>compress</th>
      <td><p><code>character ["None" | "PACKBITS" | "LZW" | "DEFLATE"]</code>
Compression method for GTiff outputs (Ignored if <code>out_format == ENVI</code>)</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p><code>integer | character  (e.g., "01a")</code> if set, MODIStsp is executed in
"test mode", using a preset Options File instead than opening the GUI or accepting the
<code>opts_file</code> parameter. This allows both to check correct installation on
user's machines, and to implement unit testing.</p></td>
    </tr>
    <tr>
      <th>n_retries</th>
      <td><p><code>numeric</code> maximum number of retries on download functions.
In case any download function fails more than <code>n_retries</code> times consecutively,
MODIStsp_process will abort, Default: 20</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> If FALSE, suppress processing messages,
Default: TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function is used to:</p><ul>
<li><p>initialize the processing (folder names, packages, etc.);</p></li>
<li><p>launch the GUI (<code><a href='MODIStsp_GUI.html'>MODIStsp_GUI()</a></code>) on interactive
execution, or load an options file to set processing arguments and/or
retrieve CLI inputs and run processing on non-interactive execution;</p></li>
<li><p>launch the routines for downloading and processing the requested datasets.
(<code><a href='MODIStsp_process.html'>MODIStsp_process()</a></code>)</p></li>
<li><p>launching the function with GUI = FALSE and without specifying a opts_file
initializes arguments with default values. This allows making a test run.</p></li>
</ul>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>License: GPL 3.0</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='MODIStsp_GUI.html'>MODIStsp_GUI()</a></code>, <code><a href='MODIStsp_process.html'>MODIStsp_process()</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Lorenzo Busetto, phD (2014-2017)</p>
<p>Luigi Ranghetti, phD (2015-2017) <a href='mailto:luigi@ranghetti.info'>luigi@ranghetti.info</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>#' # - Running the tool using the GUI</span>

<span class='co'># Running the tool without any option will start the GUI with the default or</span>
<span class='co'># last used settings, in interactive mode (i.e., with gui = TRUE).</span>

<span class='co'># MODIStsp()</span>
<span class='op'>}</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'>#' # - Running the tool specifying processing arguments in the call</span>

<span class='co'># **NOTE** Output files of examples are saved to file.path(tempdir(), "MODIStsp").</span>

<span class='co'># Here we process layers __NDVI__ and __EVI__ and quality indicator __usefulness__</span>
<span class='co'># of product __M*D13Q1__, considering both Terra and Aqua platforms, for dates</span>
<span class='co'># comprised between 2020-06-01 and 2020-06-15 and saves output to R tempdir</span>
<span class='co'># --&gt; See name and available layers for product M*D13Q1</span>

<span class='fu'><a href='MODIStsp_get_prodlayers.html'>MODIStsp_get_prodlayers</a></span><span class='op'>(</span><span class='st'>"M*D13A2"</span><span class='op'>)</span>

<span class='co'># --&gt; Launch the processing</span>
<span class='fu'>MODIStsp</span><span class='op'>(</span>gui             <span class='op'>=</span> <span class='cn'>FALSE</span>,
         out_folder      <span class='op'>=</span> <span class='st'>"$tempdir"</span>,
         selprod         <span class='op'>=</span> <span class='st'>"Vegetation_Indexes_16Days_1Km (M*D13A2)"</span>,
         bandsel         <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"EVI"</span>, <span class='st'>"NDVI"</span><span class='op'>)</span>,
         quality_bandsel <span class='op'>=</span> <span class='st'>"QA_usef"</span>,
         indexes_bandsel <span class='op'>=</span> <span class='st'>"SR"</span>,
         user            <span class='op'>=</span> <span class='st'>"mstp_test"</span> ,
         password        <span class='op'>=</span> <span class='st'>"MSTP_test_01"</span>,
         start_date      <span class='op'>=</span> <span class='st'>"2020.06.01"</span>,
         end_date        <span class='op'>=</span> <span class='st'>"2020.06.15"</span>,
         verbose         <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'>#' # - Running the tool using the settings previously saved in a specific options file</span>

<span class='co'># **NOTE** Output files of examples are saved to file.path(tempdir(), "MODIStsp").</span>
<span class='co'># You can run the examples with `gui = TRUE` to set a different output folder!</span>

<span class='co'># Here we use a test json file saved in MODIStsp installation folder which</span>
<span class='co'># downloads and processed 3 MOD13A2 images over the Como Lake (Lombardy, Italy)</span>
<span class='co'># and retrieves NDVI and EVI data, plus the Usefulness Index Quality Indicator.</span>

<span class='va'>opts_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/test_MOD13A2.json"</span>, package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span>
<span class='fu'>MODIStsp</span><span class='op'>(</span>gui <span class='op'>=</span> <span class='cn'>FALSE</span>, opts_file <span class='op'>=</span> <span class='va'>opts_file</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Running the tool using the settings previously saved in a specific option file</span>
<span class='co'># and specifying the extent from a spatial file allows to re-use the same</span>
<span class='co'># processing settings to perform download and reprocessing on a different area</span>

<span class='va'>opts_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/test_MOD13A2.json"</span>, package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span>
<span class='va'>spatial_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/lakeshapes/garda_lake.shp"</span>, package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span>
<span class='fu'>MODIStsp</span><span class='op'>(</span>gui <span class='op'>=</span> <span class='cn'>FALSE</span>, opts_file <span class='op'>=</span> <span class='va'>opts_file</span>,
  spatmeth <span class='op'>=</span> <span class='st'>"file"</span>,
  spafile <span class='op'>=</span> <span class='va'>spatial_file</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Running the tool using the settings previously saved in a</span>
<span class='co'># specific options file and specifying each time the extent from a different</span>
<span class='co'># spatial file (e.g., to perform the same processing on several extents)</span>

<span class='va'>extent_list</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/lakeshapes/garda_lake.shp"</span>,
                              package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span>,
                  <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/lakeshapes/iseo_lake.shp"</span>,
                              package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>extent_list</span>

<span class='co'># Note that you can also put all your extent files in a specific folder and</span>
<span class='co'># create the extent list using for example.</span>
<span class='co'># extent_list = list.files(system.file("testdata/lakeshapes/", package = "MODIStsp"),</span>
<span class='co'>#                          full.names = TRUE, "\.shp$")</span>

<span class='va'>opts_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/test_MOD13A2.json"</span>, package <span class='op'>=</span> <span class='st'>"MODIStsp"</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>single_shape</span> <span class='kw'>in</span> <span class='va'>extent_list</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'>MODIStsp</span><span class='op'>(</span>gui <span class='op'>=</span> <span class='cn'>FALSE</span>, opts_file <span class='op'>=</span> <span class='va'>opts_file</span>,
           spatmeth <span class='op'>=</span> <span class='st'>"file"</span>,
           spafile <span class='op'>=</span> <span class='va'>single_shape</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># output files are placed in separate folders:</span>
<span class='va'>outfiles_garda</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"MODIStsp/garda_lake/VI_16Days_1Km_v6/NDVI"</span><span class='op'>)</span>,
           full.names <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>outfiles_garda</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rspatial.org/raster'>raster</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span><span class='op'>(</span><span class='va'>outfiles_garda</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>)</span><span class='op'>)</span>

<span class='va'>outfiles_iseo</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"MODIStsp/iseo_lake/VI_16Days_1Km_v6/NDVI"</span><span class='op'>)</span>,
           full.names <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>outfiles_iseo</span>

<span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span><span class='op'>(</span><span class='va'>outfiles_iseo</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># See also https://docs.ropensci.org/MODIStsp/articles/noninteractive_execution.html</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg" /></div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks & Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
   </div>

  


  </body>
</html>


